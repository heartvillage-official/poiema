<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- í™”ë©´ ë¹„ìœ¨ ê³ ì •, í™•ëŒ€ ë°©ì§€ (ì°Œê·¸ëŸ¬ì§ ë°©ì§€ í•µì‹¬) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ’ ë§ˆìŠ¤í„°í”¼ìŠ¤ ë°¸ëŸ°ìŠ¤ í† í¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@300;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #121212;
            --primary: #FFB84C;
            --card-front: #FFFFFF;
            --card-back: #2D2727;
        }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at 50% 30%, #2a2a2a 0%, #121212 100%);
            font-family: 'Noto Sans KR', sans-serif;
            color: white;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            perspective: 1500px; /* ì „ì²´ 3D ê³µê°„ ê¹Šì´ */
            touch-action: manipulation;
        }

        .title-font { font-family: 'Jua', sans-serif; }

        /* ê¸€ì ëŠê¹€ ë°©ì§€ */
        .keep-all { word-break: keep-all; line-break: loose; }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        #app-container {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 20px;
        }

        /* í—¤ë” ì˜ì—­ */
        .header {
            text-align: center;
            margin-bottom: 25px;
            animation: fadeInDown 1s ease;
            width: 100%;
        }

        /* -------------------------------------
           3D í”Œë˜ì‹œ ì¹´ë“œ í•µì‹¬ CSS (ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ)
        -------------------------------------- */
        .card-deck {
            position: relative;
            width: 100%;
            max-width: 340px;
            height: 55vh; /* í™”ë©´ í¬ê¸°ì— ë§ê²Œ ìë™ ì¡°ì ˆ */
            min-height: 420px;
            max-height: 500px;
            perspective: 2000px;
        }

        /* ì¹´ë“œ ë˜í¼ (ìŠ¤íƒœí‚¹ & ë‚ ì•„ê°€ê¸° ì• ë‹ˆë©”ì´ì…˜ ë‹´ë‹¹) */
        .flash-card {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s;
            cursor: pointer;
            z-index: 1;
        }

        /* ì¹´ë“œ ì´ë„ˆ (ë’¤ì§‘ê¸° ë‹´ë‹¹) - iOS ë²„ê·¸ í•´ê²°ì˜ í•µì‹¬! */
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            border-radius: 24px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4), 0 0 20px rgba(255, 184, 76, 0.1);
        }

        /* ì¹´ë“œ ì•ë’·ë©´ ê³µí†µ */
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden; /* ì•„ì´í° ì•ë’·ë©´ ê²¹ì¹¨ ë°©ì§€ */
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            text-align: center;
        }

        /* ì¹´ë“œ ì•ë©´ */
        .card-front {
            background: linear-gradient(135deg, #FFB84C 0%, #FF8B13 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
            transform: rotateY(0deg);
        }

        /* ì¹´ë“œ ë’·ë©´ */
        .card-back {
            background: var(--card-back);
            border: 2px solid #FFB84C;
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg);
            background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 2px, transparent 2px, transparent 15px);
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* ì•ˆì˜ ìš”ì†Œë“¤ì„ ê³¨ê³ ë£¨ ë¶„ë°° */
        }

        /* ì¹´ë“œê°€ ë’¤ì§‘í˜”ì„ ë•Œ */
        .flash-card.is-flipped .card-inner {
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg);
            box-shadow: 0 25px 50px rgba(0,0,0,0.8), 0 0 30px rgba(255, 184, 76, 0.4);
        }

        /* ë‚ ì•„ê°€ê¸° íš¨ê³¼ */
        .swipe-out-right {
            transform: translateX(120%) rotateY(20deg) rotateZ(10deg) scale(0.8) !important;
            opacity: 0 !important;
            pointer-events: none;
        }

        .swipe-out-left {
            transform: translateX(-120%) rotateY(-20deg) rotateZ(-10deg) scale(0.8) !important;
            opacity: 0 !important;
            pointer-events: none;
        }

        /* -------------------------------------
           ë‚´ë¶€ ì»¨í…ì¸  ìŠ¤íƒ€ì¼
        -------------------------------------- */
        .level-badge {
            position: absolute;
            top: -16px;
            background: #2D2727;
            color: #FFB84C;
            padding: 6px 24px;
            border-radius: 30px;
            font-weight: 900;
            font-size: 0.9rem;
            border: 2px solid #FFB84C;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            pointer-events: none;
        }

        /* ë°¸ëŸ°ìŠ¤ ì„ íƒ ë²„íŠ¼ (ì°Œë¶€ ì•ˆ ë˜ê²Œ ê½‰ ì±„ì›€) */
        .balance-option {
            width: 100%;
            flex: 1; /* ë‚¨ì€ ê³µê°„ì„ ì•Œì•„ì„œ ë˜‘ê°™ì´ ì°¨ì§€í•¨ */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            font-weight: 700;
            font-size: clamp(1rem, 4vw, 1.15rem); /* ê¸€ì í¬ê¸° ìœ ë™ì  ì¡°ì ˆ */
            line-height: 1.4;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
            margin: 5px 0;
            color: #E2E8F0;
        }

        /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ */
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none; /* ìˆ¨ê²¨ì ¸ ìˆì„ ë•Œ í´ë¦­ ë°©ì§€ */
        }
        
        .controls.show { 
            opacity: 1; 
            pointer-events: auto;
        }

        .btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            backdrop-filter: blur(5px);
            font-size: 0.95rem;
        }

        .btn-primary { background: #FFB84C; color: #121212; border: none; box-shadow: 0 5px 15px rgba(255,184,76,0.3); }
        .btn-primary:active { transform: scale(0.95); }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #confetti { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; }
    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <div id="app-container">
        
        <div class="header">
            <h1 class="title-font text-3xl md:text-4xl text-[#FFB84C] mb-3 drop-shadow-lg">âœ¨ ë‚˜ë§Œì˜ ë°¸ëŸ°ìŠ¤ ì°¾ê¸° âœ¨</h1>
            <p class="text-gray-300 text-xs md:text-sm tracking-widest bg-white/10 px-5 py-2 rounded-full inline-block backdrop-blur-sm border border-white/10 shadow-inner">
                ì¹´ë“œë¥¼ ê°€ë³ê²Œ í„°ì¹˜í•´ë³´ì„¸ìš”! ğŸ‘†
            </p>
        </div>

        <div class="card-deck" id="deck">
            <!-- JS ë™ì  ìƒì„± ì˜ì—­ -->
        </div>

        <div class="controls" id="controls">
            <button class="btn" onclick="swipeCard('left')">ğŸ‘ˆ íŒ¨ìŠ¤</button>
            <button class="btn btn-primary" onclick="swipeCard('right')">ì„ íƒ ì™„ë£Œ ğŸ‘‰</button>
        </div>

        <!-- ìµœì¢… ì™„ë£Œ í™”ë©´ -->
        <div id="end-message" class="hidden flex-col items-center justify-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full text-center z-50">
            <div class="text-7xl mb-6 animate-bounce drop-shadow-2xl">ğŸ¨</div>
            <h2 class="title-font text-4xl text-[#FFB84C] mb-4">ë¹Œë“œì—… ì™„ë£Œ!</h2>
            <p class="text-lg text-gray-200 mb-8 leading-relaxed keep-all px-4">
                ì—¬ëŸ¬ë¶„ì˜ ë§ˆìŒì† ìš°ì„ ìˆœìœ„ê°€ ë³´ì´ì‹œë‚˜ìš”?<br>
                ì´ì œ ì´ ê°€ì¹˜ë¥¼ ë“¬ë¿ ë‹´ì•„<br>
                <strong class="text-white text-xl border-b-2 border-[#FFB84C] pb-1">ë‚˜ë§Œì˜ ìºë¦¬ì»¤ì²˜ ë¹„ì „ë³´ë“œ</strong>ë¥¼ ê·¸ë¦´ ì‹œê°„ì…ë‹ˆë‹¤!
            </p>
            <button class="btn btn-primary text-lg px-8 py-4 rounded-full shadow-[0_0_30px_rgba(255,184,76,0.5)] animate-pulse" onclick="startVisionBoard()">
                ë¹„ì „ë³´ë“œ ê·¸ë¦¬ê¸° ğŸš€
            </button>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // ì‚¬ë‘ëŒ€í‘œ ê¸°íš ë¦¬ìŠ¤íŠ¸
        const cardsData = [
            {
                level: "Lv.1 ì›Œë°ì—…",
                title: "ê¶ê·¹ì˜ ì…ë§› ë°¸ëŸ°ìŠ¤",
                icon: "ğŸ—",
                optA: "í‰ìƒ ì¹˜í‚¨ë§Œ ë¨¹ê¸°",
                optB: "í‰ìƒ ë–¡ë³¶ì´ë§Œ ë¨¹ê¸°"
            },
            {
                level: "Lv.1 ì„±í–¥ íŒŒì•…",
                title: "ì–´ëŠ ìª½ì´ ë” í‚¹ë°›ì•„?",
                icon: "ğŸ¤¯",
                optA: "ë‚´ ë¼ˆ ê¹ëŠ” ë…¸ë ¥ì„<br>ì•„ë¬´ë„ ëª°ë¼ì£¼ê¸°",
                optB: "ë‚´ê°€ ì•ˆ í•œ ì¼ë¡œ<br>ê³¼í•˜ê²Œ ì¹­ì°¬ë°›ê¸°"
            },
            {
                level: "Lv.2 ê°€ì¹˜ê´€",
                title: "í•˜ë£¨ 25ì‹œê°„ì´ ì£¼ì–´ì§„ë‹¤ë©´?",
                icon: "â°",
                optA: "ì•„ë¬´ ìƒê° ì—†ì´<br>1ì‹œê°„ ê¿€ì  ìê¸°",
                optB: "ë‚˜ë§Œì˜ ì·¨ë¯¸/ìê¸°ê³„ë°œ<br>1ì‹œê°„ íˆ¬ìí•˜ê¸°"
            },
            {
                level: "Lv.2 ìš°ì„ ìˆœìœ„",
                title: "ë‚´ì¼ ì§€êµ¬ ì¢…ë§ì´ ì˜¨ë‹¤ë©´?",
                icon: "ğŸŒ",
                optA: "ì‚¬ë‘í•˜ëŠ” ê°€ì¡±/ì¹œêµ¬ì™€<br>ë§ˆì§€ë§‰ ë§Œì°¬ ì¦ê¸°ê¸°",
                optB: "í‰ì†Œ í•˜ê³  ì‹¶ì—ˆë˜ ì¼<br>ë¯¸ì¹œ ë“¯ì´ ì €ì§ˆëŸ¬ë³´ê¸°"
            },
            {
                level: "Lv.3 ë¹„ì „",
                title: "í•˜ë‚˜ë‹˜ì´ ì´ˆëŠ¥ë ¥ì„ ì£¼ì‹ ë‹¤ë©´?",
                icon: "âš¡",
                optA: "ë¯¸ë˜ì˜ ë‚´ ëª¨ìŠµì„<br>ë³¼ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥",
                optB: "ì£¼ë³€ ì‚¬ëŒì˜ ì•„í”ˆ ë§ˆìŒì„<br>ì¹˜ìœ í•˜ëŠ” ëŠ¥ë ¥"
            },
            {
                level: "Lv.3 ë§ˆìŠ¤í„°í”¼ìŠ¤",
                title: "10ë…„ ë’¤ ë‚˜ì˜ í•´ì‹œíƒœê·¸ëŠ”?",
                icon: "ğŸ’",
                optA: "#ììˆ˜ì„±ê°€<br>#ì„±ê³µí•œ_ëŠ¥ë ¥ì",
                optB: "#ì¡´ê²½ë°›ëŠ”<br>#ì„ í•œ_ì˜í–¥ë ¥"
            }
        ];

        const deck = document.getElementById('deck');
        const controls = document.getElementById('controls');
        let currentCardIndex = cardsData.length - 1; // ë°°ì—´ ì—­ìˆœìœ¼ë¡œ ìŠ¤íƒœí‚¹

        function initCards() {
            cardsData.forEach((data, index) => {
                const cardWrapper = document.createElement('div');
                cardWrapper.className = 'flash-card';
                cardWrapper.id = `card-${index}`;
                
                // 3D ìŠ¤íƒœí‚¹ íš¨ê³¼ ê³„ì‚°
                const distFromTop = (cardsData.length - 1 - index);
                const translateY = distFromTop * 12;
                const translateZ = distFromTop * -40;
                const scale = 1 - (distFromTop * 0.06);
                const opacity = 1 - (distFromTop * 0.15);

                cardWrapper.style.zIndex = index;
                // wrapperì— ìœ„ì¹˜ transform ì ìš©
                cardWrapper.style.transform = `translateY(${translateY}px) translateZ(${translateZ}px) scale(${scale})`;
                cardWrapper.style.opacity = opacity;

                cardWrapper.innerHTML = `
                    <div class="card-inner">
                        <!-- ì¹´ë“œ ì•ë©´ (ì§ˆë¬¸ í‘œì§€) -->
                        <div class="card-face card-front">
                            <div class="level-badge">${data.level}</div>
                            <div class="text-7xl mb-6 drop-shadow-xl transform transition-transform group-hover:scale-110">${data.icon}</div>
                            <h2 class="title-font text-3xl font-bold leading-snug text-[#2D2727] keep-all px-2">${data.title}</h2>
                            <div class="mt-8 bg-white/40 text-[#2D2727] font-bold text-xs px-4 py-2 rounded-full animate-pulse shadow-sm">
                                ğŸ‘† íƒ­í•´ì„œ ì—´ì–´ë³´ê¸°
                            </div>
                        </div>
                        
                        <!-- ì¹´ë“œ ë’·ë©´ (ì„ íƒì§€) -->
                        <div class="card-face card-back">
                            <div class="text-4xl mb-2">${data.icon}</div>
                            <h3 class="title-font text-xl text-[#FFB84C] mb-2">ë‹¹ì‹ ì˜ ì„ íƒì€?</h3>
                            
                            <!-- ì„ íƒì§€ ë°•ìŠ¤ (flex-1ë¡œ ì°Œê·¸ëŸ¬ì§ ë°©ì§€) -->
                            <div class="w-full flex flex-col gap-2 flex-1 mt-2">
                                <div class="balance-option" onclick="selectOption(event, this)">
                                    <span class="keep-all text-center">A. ${data.optA}</span>
                                </div>
                                <div class="text-gray-400 font-black text-sm tracking-widest my-0.5">VS</div>
                                <div class="balance-option" onclick="selectOption(event, this)">
                                    <span class="keep-all text-center">B. ${data.optB}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                // í„°ì¹˜ ì‹œ ì¹´ë“œ ë’¤ì§‘ê¸°
                cardWrapper.addEventListener('click', function() {
                    // ì œì¼ ìœ„ ì¹´ë“œë§Œ ë°˜ì‘í•˜ë„ë¡
                    if (this.id === `card-${currentCardIndex}`) {
                        this.classList.toggle('is-flipped');
                        if (this.classList.contains('is-flipped')) {
                            controls.classList.add('show');
                        } else {
                            controls.classList.remove('show');
                        }
                    }
                });

                deck.appendChild(cardWrapper);
            });
        }

        // ì˜µì…˜ í„°ì¹˜ íš¨ê³¼ & ìë™ ë„˜ê¸°ê¸°
        window.selectOption = function(e, element) {
            e.stopPropagation(); // ì¹´ë“œ ë‹«íˆëŠ” í˜„ìƒ ë°©ì§€
            
            // ë‹¤ë¥¸ ì˜µì…˜ë“¤ ì´ˆê¸°í™”
            const siblings = element.parentElement.querySelectorAll('.balance-option');
            siblings.forEach(el => {
                el.style.background = 'rgba(255, 255, 255, 0.08)';
                el.style.borderColor = 'rgba(255, 255, 255, 0.15)';
                el.style.boxShadow = 'none';
                el.style.color = '#E2E8F0';
            });

            // ì„ íƒëœ ê±° ë°˜ì§ì´ê²Œ!
            element.style.background = 'rgba(255, 184, 76, 0.2)';
            element.style.borderColor = '#FFB84C';
            element.style.color = '#FFB84C';
            element.style.boxShadow = '0 0 20px rgba(255,184,76,0.4)';

            // 0.8ì´ˆ ê°ìƒ í›„ ìš°ì¸¡ìœ¼ë¡œ íœ™~
            setTimeout(() => {
                swipeCard('right');
            }, 800);
        };

        // ì¹´ë“œ ë‚ ë ¤ë²„ë¦¬ê¸°
        window.swipeCard = function(direction) {
            if (currentCardIndex < 0) return;

            const currentCard = document.getElementById(`card-${currentCardIndex}`);
            
            if (direction === 'left') {
                currentCard.classList.add('swipe-out-left');
            } else {
                currentCard.classList.add('swipe-out-right');
            }

            controls.classList.remove('show');
            currentCardIndex--;

            // ë°‘ì— ê¹”ë ¤ìˆë˜ ì¹´ë“œë“¤ ì•ìœ¼ë¡œ ëŒì–´ì˜¤ê¸°
            updateCardsPosition();

            // ëª¨ë“  ì¹´ë“œë¥¼ ë‹¤ ë„˜ê²¼ë‹¤ë©´ ì™„ë£Œ í™”ë©´ ë„ìš°ê¸°
            if (currentCardIndex < 0) {
                setTimeout(() => {
                    deck.style.display = 'none';
                    document.querySelector('.header').style.display = 'none';
                    const endMsg = document.getElementById('end-message');
                    endMsg.classList.remove('hidden');
                    endMsg.classList.add('flex');
                    fireConfetti();
                }, 500);
            }
        };

        // ë‚¨ì€ ì¹´ë“œë“¤ 3D ëìŠ¤ ì¬ì¡°ì •
        function updateCardsPosition() {
            for (let i = 0; i <= currentCardIndex; i++) {
                const cardWrapper = document.getElementById(`card-${i}`);
                const distFromTop = currentCardIndex - i; 
                
                const translateY = distFromTop * 12;
                const translateZ = distFromTop * -40;
                const scale = 1 - (distFromTop * 0.06);
                const opacity = 1 - (distFromTop * 0.15);

                cardWrapper.style.zIndex = i;
                // ìœ„ì¹˜ ì´ë™ì€ !importantê°€ ì—†ìœ¼ë¯€ë¡œ CSSì—ì„œ ë¶€ë“œëŸ½ê²Œ transition ë¨
                cardWrapper.style.transform = `translateY(${translateY}px) translateZ(${translateZ}px) scale(${scale})`;
                cardWrapper.style.opacity = opacity;
            }
        }

        // ì¶•í•˜ í­ì£½ íŒŒí‹°í´
        function fireConfetti() {
            const duration = 3000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 999 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        // ë¹„ì „ë³´ë“œ ì‹œì‘ ì•Œë¦¼
        window.startVisionBoard = function() {
            alert("ì‚¬ë‘ëŒ€í‘œ íë ˆì´í„° ì¶œë™!! ğŸ‘©â€ğŸ¨ \nì•„ì´ë“¤ì—ê²Œ ë°”ì¸ë” ì†ì§€ì™€ ìƒ‰ì—°í•„ì„ ë‚˜ëˆ ì£¼ì„¸ìš”!");
        };

        initCards();
    </script>
</body>
</html>
